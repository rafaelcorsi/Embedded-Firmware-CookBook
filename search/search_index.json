{"config":{"lang":["en"],"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Embedded System Cook Book \u00b6 Ideia do livro \u00e9 de ter receitas de como desenvolver firmware para sistemas embarcados, as receitas ser\u00e3o de \"aplica\u00e7\u00f5es\", \"sensores\" e \"atuadores\" sem pensar muito no HW, mais focado para o firmware. misc sensores atuadores dsp","title":"Home"},{"location":"#embedded-system-cook-book","text":"Ideia do livro \u00e9 de ter receitas de como desenvolver firmware para sistemas embarcados, as receitas ser\u00e3o de \"aplica\u00e7\u00f5es\", \"sensores\" e \"atuadores\" sem pensar muito no HW, mais focado para o firmware. misc sensores atuadores dsp","title":"Embedded System Cook Book"},{"location":"misc/digital-input-irq/","text":"Digital Input - IRQ \u00b6 read before This complements Digital Input - Pooling . General information and hardware is describe there. The use of interruption makes the code react to event on the pin (High -> Low/ Low -> High/ High/ Low). The advance avoid losing information priorization of events entering in low power modes Firmware \u00b6 Steps to read a simple digital data from PIO pin for the Enable system clock/ board configs. Enable the peripheral Configure on the peripheral: Pin as input As need: Pull-Up/ Pull-Down Read the data Example for internal Pull-Up \u00b6 Firmware example for SAME70, with internal Pull-Up #define BUT_PIO PIOA #define BUT_PIO_ID ID_PIOA #define BUT_IDX 11 #define BUT_IDX_MASK (1 << BUT_IDX) #define BUT_SETTINGS PIO_PULLUP int main ( void ){ // init system sysclk_init (); // enable and configure peripheral pmc_enable_periph_clk ( BUT_PRO_ID ); pio_configure ( BUT_PIO , PIO_INPUT , BUT_IDX_MASK , BUT_SETTINGS ); while ( 1 ){ if ( pio_get ( BUT_PIO , PIO_INPUT , BUT_IDX_MASK )){ // button not pressed } else { // button pressed } } }","title":"Digital Input - IRQ"},{"location":"misc/digital-input-irq/#digital-input-irq","text":"read before This complements Digital Input - Pooling . General information and hardware is describe there. The use of interruption makes the code react to event on the pin (High -> Low/ Low -> High/ High/ Low). The advance avoid losing information priorization of events entering in low power modes","title":"Digital Input - IRQ"},{"location":"misc/digital-input-irq/#firmware","text":"Steps to read a simple digital data from PIO pin for the Enable system clock/ board configs. Enable the peripheral Configure on the peripheral: Pin as input As need: Pull-Up/ Pull-Down Read the data","title":"Firmware"},{"location":"misc/digital-input-irq/#example-for-internal-pull-up","text":"Firmware example for SAME70, with internal Pull-Up #define BUT_PIO PIOA #define BUT_PIO_ID ID_PIOA #define BUT_IDX 11 #define BUT_IDX_MASK (1 << BUT_IDX) #define BUT_SETTINGS PIO_PULLUP int main ( void ){ // init system sysclk_init (); // enable and configure peripheral pmc_enable_periph_clk ( BUT_PRO_ID ); pio_configure ( BUT_PIO , PIO_INPUT , BUT_IDX_MASK , BUT_SETTINGS ); while ( 1 ){ if ( pio_get ( BUT_PIO , PIO_INPUT , BUT_IDX_MASK )){ // button not pressed } else { // button pressed } } }","title":"Example for internal Pull-Up"},{"location":"misc/digital-input-pooling/","text":"Digital Input - Pooling \u00b6 Digital input output (I/O) is the most simple way to read from external world. This signal can assume only two states: On/OFF, 1 / 0 , High / Low . most common uses Buttons (push/ slider/ dip switch) Signal pulse (encoder) ... The peripheral that allows us to read a digital value is common named: Parallel I/O - PIO General-Purpose I/O - GPIO Normally this peripherals controls more than one pin and each microcontroller has several instances of the same peripheral, to control more pins. Each pin can be configured independent. Microchip SAM Microchip SAM microcontrollers called this as PIO, each instance of the PIO is called PIO A , PIO B , PIO C , ... each PIO can controll up to 32 independents pins. Hardware \u00b6 This examples shows how to read a button, but can be apply to others digital componentes. There is two way to use a button: with Pull-Up or Pull-Down. Most peripherals allow to enable a internal Pull-UP/Pull-Down resistor, with no need to connet resistores to the uC. Internal Pull-Up Best solution (reduces the risk of burning, uses fewer components) Setup: Connect button to pin and to gnd Need to configure Pull-Up on the peripheral. No need to external resistor Read 1 when not pressed and 0 when pressed. External Pull-Up Setup: Connect button to pin and to gnd Add a parallel resistor to VCC must respect max pin voltage Read 1 when not pressed and 0 when pressed. Warning You must respect the VCC of your system. Internal Pull-Down TODO Read 0 when not pressed and 1 when pressed. External Pull-Down TODO Read 0 when not pressed and 1 when pressed. Firmware \u00b6 Steps to read a simple digital data: Enable system clock/ board configs. Enable the peripheral Configure on the peripheral: Pin as input As need: Pull-Up/ Pull-Down Read the data Code \u00b6 Firmware example for SAME70, with internal Pull-Up to read a press button connected to the pin PA11 . #define BUT_PIO PIOA #define BUT_PIO_ID ID_PIOA #define BUT_IDX 11 #define BUT_IDX_MASK (1 << BUT_IDX) #define BUT_SETTINGS PIO_PULLUP int main ( void ){ // init system sysclk_init (); // enable and configure peripheral pmc_enable_periph_clk ( BUT_PIO_ID ); pio_configure ( BUT_PIO , PIO_INPUT , BUT_IDX_MASK , BUT_SETTINGS ); while ( 1 ){ if ( pio_get ( BUT_PIO , PIO_INPUT , BUT_IDX_MASK )){ // button not pressed } else { // button pressed } } }","title":"Digital Input - Pooling"},{"location":"misc/digital-input-pooling/#digital-input-pooling","text":"Digital input output (I/O) is the most simple way to read from external world. This signal can assume only two states: On/OFF, 1 / 0 , High / Low . most common uses Buttons (push/ slider/ dip switch) Signal pulse (encoder) ... The peripheral that allows us to read a digital value is common named: Parallel I/O - PIO General-Purpose I/O - GPIO Normally this peripherals controls more than one pin and each microcontroller has several instances of the same peripheral, to control more pins. Each pin can be configured independent. Microchip SAM Microchip SAM microcontrollers called this as PIO, each instance of the PIO is called PIO A , PIO B , PIO C , ... each PIO can controll up to 32 independents pins.","title":"Digital Input - Pooling"},{"location":"misc/digital-input-pooling/#hardware","text":"This examples shows how to read a button, but can be apply to others digital componentes. There is two way to use a button: with Pull-Up or Pull-Down. Most peripherals allow to enable a internal Pull-UP/Pull-Down resistor, with no need to connet resistores to the uC. Internal Pull-Up Best solution (reduces the risk of burning, uses fewer components) Setup: Connect button to pin and to gnd Need to configure Pull-Up on the peripheral. No need to external resistor Read 1 when not pressed and 0 when pressed. External Pull-Up Setup: Connect button to pin and to gnd Add a parallel resistor to VCC must respect max pin voltage Read 1 when not pressed and 0 when pressed. Warning You must respect the VCC of your system. Internal Pull-Down TODO Read 0 when not pressed and 1 when pressed. External Pull-Down TODO Read 0 when not pressed and 1 when pressed.","title":"Hardware"},{"location":"misc/digital-input-pooling/#firmware","text":"Steps to read a simple digital data: Enable system clock/ board configs. Enable the peripheral Configure on the peripheral: Pin as input As need: Pull-Up/ Pull-Down Read the data","title":"Firmware"},{"location":"misc/digital-input-pooling/#code","text":"Firmware example for SAME70, with internal Pull-Up to read a press button connected to the pin PA11 . #define BUT_PIO PIOA #define BUT_PIO_ID ID_PIOA #define BUT_IDX 11 #define BUT_IDX_MASK (1 << BUT_IDX) #define BUT_SETTINGS PIO_PULLUP int main ( void ){ // init system sysclk_init (); // enable and configure peripheral pmc_enable_periph_clk ( BUT_PIO_ID ); pio_configure ( BUT_PIO , PIO_INPUT , BUT_IDX_MASK , BUT_SETTINGS ); while ( 1 ){ if ( pio_get ( BUT_PIO , PIO_INPUT , BUT_IDX_MASK )){ // button not pressed } else { // button pressed } } }","title":"Code"},{"location":"misc/digital-output/","text":"Digital Output \u00b6 Digital output is the most simple way to control the external world. This signal can assume only two states: On/OFF, 1 / 0 , High / Low . most common uses LED DC Motor Buzzer ... The peripheral that allows us to read a digital value is common named: Parallel I/O - PIO General-Purpose I/O - GPIO Peripheral Read more about this peripheral on Peripheral-PIO . Hardware \u00b6 This examples shows how to control a LED, but can be apply to others digital components. This example shows on how to control a LED with a microcontroller, the series resistor limits the electric current. Drive in Best solution (reduces the risk of burning as normally input accept electric current is higher than output current) Connect LED to resistor to VCC Write 0 to pin light up LED, 1 turn off. Drive out Warning You must respect the VCC of your system. You must check the resistor value to your system. Firmware \u00b6 Steps to simple control a PIO pin: Enable system clock/ board configs. Enable the peripheral Configure the Pin as output Control pin (High/ Low) Example \u00b6 Firmware example for SAME70, drive in to blink an LED connected to the pin `PC8``. #define LED_PIO PIOC #define LED_PIO_ID ID_PIOC #define LED_IDX 8 #define LED_IDX_MASK (1 << LED_IDX) #define LED_CONFIG PIO_DEFAULT int main ( void ){ sysclk_init (); pmc_enable_periph_clk ( LED_PIO_ID ); while ( 1 ){ // drive pin low - turns led on pio_clear ( LED_PIO , LED_IDX_MASK ); delay_ms ( 100 ); // drive pin high - turns led off pio_set ( LED_PIO , LED_IDX_MASK ); delay_ms ( 100 ); }","title":"Digital Output"},{"location":"misc/digital-output/#digital-output","text":"Digital output is the most simple way to control the external world. This signal can assume only two states: On/OFF, 1 / 0 , High / Low . most common uses LED DC Motor Buzzer ... The peripheral that allows us to read a digital value is common named: Parallel I/O - PIO General-Purpose I/O - GPIO Peripheral Read more about this peripheral on Peripheral-PIO .","title":"Digital Output"},{"location":"misc/digital-output/#hardware","text":"This examples shows how to control a LED, but can be apply to others digital components. This example shows on how to control a LED with a microcontroller, the series resistor limits the electric current. Drive in Best solution (reduces the risk of burning as normally input accept electric current is higher than output current) Connect LED to resistor to VCC Write 0 to pin light up LED, 1 turn off. Drive out Warning You must respect the VCC of your system. You must check the resistor value to your system.","title":"Hardware"},{"location":"misc/digital-output/#firmware","text":"Steps to simple control a PIO pin: Enable system clock/ board configs. Enable the peripheral Configure the Pin as output Control pin (High/ Low)","title":"Firmware"},{"location":"misc/digital-output/#example","text":"Firmware example for SAME70, drive in to blink an LED connected to the pin `PC8``. #define LED_PIO PIOC #define LED_PIO_ID ID_PIOC #define LED_IDX 8 #define LED_IDX_MASK (1 << LED_IDX) #define LED_CONFIG PIO_DEFAULT int main ( void ){ sysclk_init (); pmc_enable_periph_clk ( LED_PIO_ID ); while ( 1 ){ // drive pin low - turns led on pio_clear ( LED_PIO , LED_IDX_MASK ); delay_ms ( 100 ); // drive pin high - turns led off pio_set ( LED_PIO , LED_IDX_MASK ); delay_ms ( 100 ); }","title":"Example"},{"location":"misc/digital_out/","text":"Digital Output \u00b6 Digital output is the most simple way to control the external world. This signal can assume only two states: On/OFF, 1 / 0 , High / Low . most common uses LED DC Motor Buzzer ... Normally this peripherals controls more than one pin and each microcontroller has several instances of the same peripheral, to control more pins. Each pin can be configured independent. Microchip SAM Microchip SAM microcontrollers called this as PIO, each instance of the PIO is called PIO A , PIO B , PIO C , ... each PIO can controll up to 32 independents pins. Hardware \u00b6 This examples shows how to control a LED, but can be apply to others digital componentes. Firmware \u00b6 Steps to simple control a PIO pin: Enable system clock/ board configs. Enable the peripheral Configure the Pin as output Write to pin Example \u00b6","title":"Digital Output"},{"location":"misc/digital_out/#digital-output","text":"Digital output is the most simple way to control the external world. This signal can assume only two states: On/OFF, 1 / 0 , High / Low . most common uses LED DC Motor Buzzer ... Normally this peripherals controls more than one pin and each microcontroller has several instances of the same peripheral, to control more pins. Each pin can be configured independent. Microchip SAM Microchip SAM microcontrollers called this as PIO, each instance of the PIO is called PIO A , PIO B , PIO C , ... each PIO can controll up to 32 independents pins.","title":"Digital Output"},{"location":"misc/digital_out/#hardware","text":"This examples shows how to control a LED, but can be apply to others digital componentes.","title":"Hardware"},{"location":"misc/digital_out/#firmware","text":"Steps to simple control a PIO pin: Enable system clock/ board configs. Enable the peripheral Configure the Pin as output Write to pin","title":"Firmware"},{"location":"misc/digital_out/#example","text":"","title":"Example"}]}